var numberOfSwitches = 0
var numberOfGems = 0


func CollectandWalk() {
    if isOnGem {
        collectGem()
        numberOfGems += 1
    }
    if isOnClosedSwitch {
        toggleSwitch()
        numberOfSwitches += 1
    }
    if isBlocked {
        if isBlockedRight {
            turnLeft()
        } else if isBlockedLeft {
            turnRight()
        }
    }
    moveForward()
}
while !isOnClosedSwitch && !isOnOpenSwitch {
    CollectandWalk()
}

while numberOfSwitches < numberOfGems {
    CollectandWalk()
}
